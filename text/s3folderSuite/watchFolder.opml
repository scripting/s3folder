on watchFolder () {	trueChanges		true10/14/13; 2:50:44 PM by DW			trueCreated.	local (adrdata = s3folderSuite.init ());	if adrdata^.prefs.enabled {		local (folder = adrdata^.prefs.folder, f, adrfile, mod, startticks = clock.ticks ());		adrdata^.stats.ctChecks++;		adrdata^.stats.whenLastCheck = clock.now ();		file.surefilepath (folder + "xxx");		for adrfile in @adrdata^.stats.files {			adrfile^.flag = true};		fileloop (f in folder, infinity) {			if not (file.filefrompath (f) beginswith ".") {				adrfile = s3folderSuite.initFile (f);				mod = file.modified (f);				adrfile^.ctChecks++;				if mod > adrfile^.whenLastModified {					local (now = clock.now ());					msg ("Uploading " + adrfile^.path + ".");					s3.newobject (adrdata^.prefs.s3path + adrfile^.s3path, file.readwholefile (f));					adrfile^.whenLastModified = mod;					adrfile^.ctUploads++;					adrfile^.whenLastUpload = now;					adrdata^.stats.ctUploads++;					adrdata^.stats.whenLastUpload = now;					adrfile^.flag = true;					msg ("")};				delete (@adrfile^.flag)}};		bundle { //delete all files with the flag still present			local (i, adrfile);			for i = sizeof (adrdata^.stats.files) downto 1 {				adrfile = @adrdata^.stats.files [i];				if defined (adrfile^.flag) {					msg ("Deleting " + adrfile^.path + ".");					try {s3.deleteobject (adrdata^.prefs.s3path + adrfile^.s3path)};					delete (adrfile);					msg ("")}}};		adrdata^.stats.ctTicksLastWatch = clock.ticks () - startticks}};bundle { //test code	watchFolder ()}